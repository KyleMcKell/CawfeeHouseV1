generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Brew {
  id          Int     @id @default(autoincrement())
  ownerId     Int
  methodId    Int
  coffeeId    Int
  brewName    String  @db.VarChar(255)
  ratio       Int?
  brewTime    Int?
  waterTemp   Int?
  flavorings  String? @db.VarChar(255)
  grindSize   String? @db.VarChar(255)
  ingredients String? @db.VarChar(255)
  isFavorite  Boolean @default(false)
  about       String?
  coffee      Coffee  @relation(fields: [coffeeId], references: [id])
  method      Method  @relation(fields: [methodId], references: [id])
  barista       User  @relation(fields: [ownerId], references: [id])

  @@index([brewName], name: "brewIndex")
}

model Coffee {
  id         Int     @id @default(autoincrement())
  ownerId    Int
  coffeeName String  @db.VarChar(255)
  brand      String? @db.VarChar(255)
  notes      String? @db.VarChar(255)
  roastType  String? @db.VarChar(255)
  about      String?
  barista    User    @relation(fields: [ownerId], references: [id])
  brews      Brew[]

  @@index([coffeeName], name: "coffeeIndex")
}

model Method {
  id         Int     @id @default(autoincrement())
  ownerId    Int
  methodName String  @db.VarChar(255)
  about      String?
  barista    User    @relation(fields: [ownerId], references: [id])
  brews      Brew[]

  @@index([methodName], name: "methodIndex")
}

model User {
  id       Int       @id @default(autoincrement())
  username String    @unique @db.VarChar(255)
  email    String    @unique @db.VarChar(255)
  password String    @db.VarChar(255)
  brews    Brew[]
  coffees  Coffee[]
  methods  Method[]

  @@index([email], name: "emailIndex")
  @@index([username], name: "usernameIndex")
}
